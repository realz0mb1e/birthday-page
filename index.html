<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday</title>
    <style>
        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* ç”Ÿæ—¥ä¸»é¢˜å­—ä½“ï¼Œé€‚é…ä¸åŒç³»ç»Ÿ */
            font-family: "Comic Sans MS", "åæ–‡ç¥ç€", "å¹¼åœ†", "å¾®è½¯é›…é»‘", sans-serif;
        }

        /* åˆå§‹å…¨å±é»‘è‰²èƒŒæ™¯ */
        body {
            width: 100vw;
            height: 100vh;
            background-color: #000;
            overflow: hidden;
            position: relative;
            /* èƒŒæ™¯è‰²è¿‡æ¸¡åŠ¨ç”» */
            transition: background-color 0.8s ease;
        }

        /* ç”Ÿæ—¥ä¸»é¢˜èƒŒæ™¯è‰²ï¼ˆç‚¹å‡»æŒ‰é’®åæ·»åŠ ï¼‰- æ”¹ä¸ºæ¸©é¦¨çš„æµ…æ¡ƒç²‰è‰² */
        body.birthday-bg {
            background-color: #ffe8f0; /* æš–è°ƒç”Ÿæ—¥èƒŒæ™¯ï¼Œéçº¯ç™½ï¼Œæ›´æœ‰æ°›å›´æ„Ÿ */
        }

        /* å±…ä¸­æ–‡å­—æ ·å¼ - ç”Ÿæ—¥æç¤ºæ–‡å­— */
        .birthday-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            /* å“åº”å¼å­—ä½“ï¼šæœ€å°2remï¼Œæœ€å¤§4remï¼Œéšå±å¹•å®½åº¦è‡ªé€‚åº” */
            font-size: clamp(2rem, 5vw, 4rem);
            opacity: 0;
            /* æ·¡å…¥æ·¡å‡ºè¿‡æ¸¡åŠ¨ç”» */
            transition: opacity 0.8s ease;
            text-align: center;
            width: 90%;
        }

        /* å¯åŠ¨æŒ‰é’®æ ·å¼ - ç™½è‰²åœ†è§’æŒ‰é’® */
        .start-btn {
            position: absolute;
            bottom: 20%;
            left: 50%;
            transform: translate(-50%, 0);
            padding: clamp(0.8rem, 2vw, 1.5rem) clamp(1.5rem, 4vw, 3rem);
            background-color: #fff;
            color: #ff69b4;
            border: none;
            border-radius: 50px;
            font-size: clamp(1rem, 2.5vw, 1.8rem);
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.8s ease;
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
            z-index: 10;
        }

        .start-btn:hover {
            background-color: #ff69b4;
            color: #fff;
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.8);
        }

        /* å½©ç‚®å®¹å™¨ - åŸºäºæŒ‰é’®ä½ç½®å¯¹ç§°ï¼Œè°ƒæ•´ä½ç½®é¿å…é®æŒ¡è›‹ç³• */
        .cannons {
            position: absolute;
            bottom: 10%; /* å‘ä¸‹è°ƒæ•´ï¼Œè¿œç¦»è›‹ç³•åŒºåŸŸ */
            left: 50%;
            transform: translate(-50%, 0);
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.8s ease;
            z-index: 5;
        }

        /* å½©ç‚®emojiæ ·å¼ - å°ºå¯¸ä¸ºè›‹ç³•çš„1/2ï¼ˆè›‹ç³•æ”¾å¤§ååŒæ­¥æ”¾å¤§ï¼‰ */
        .cannon {
            /* è›‹ç³•æ”¾å¤§1å€åæ˜¯clamp(200px,50vw,600px)ï¼Œè¿™é‡Œå–1/2 */
            font-size: clamp(100px, 25vw, 300px);
            line-height: 1;
        }

        /* å·¦ä¾§å½©ç‚® - é—´è·æé«˜3å€ */
        .cannon-left {
            margin-right: clamp(16rem, 40vw, 30rem); /* åŸ8remÃ—3=24rem */
        }

        /* å³ä¾§å½©ç‚® - é—´è·æé«˜3å€ */
        .cannon-right {
            margin-left: clamp(16rem, 40vw, 30rem); /* åŸemÃ—3=24rem */
        }

        /* è›‹ç³•Emojiæ ·å¼ - æ”¾å¤§1å€ */
        .cake-emoji {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            /* åŸå°ºå¯¸Ã—2ï¼šæœ€å°200pxï¼Œæœ€å¤§600px */
            font-size: clamp(200px, 50vw, 600px);
            line-height: 1;
            opacity: 0;
            transition: opacity 1s ease;
            z-index: 4; /* ä½äºå½©ç‚®å±‚çº§ï¼Œé¿å…é®æŒ¡ */
        }

        /* Happy Birthdayæ ‡é¢˜ - ä¸Šç§»é¿å…è¢«è›‹ç³•é®æŒ¡ï¼Œæ›´æ¢é¢œè‰² */
        .happy-title {
            position: absolute;
            top: 10%; /* ä»20%ä¸Šç§»åˆ°10%ï¼Œè¿œç¦»è›‹ç³•åŒºåŸŸ */
            left: 50%;
            transform: translate(-50%, 0);
            color: #e63970; /* æ›´æ·±çš„ç«ç²‰è‰²ï¼Œä¸æµ…æ¡ƒè‰²èƒŒæ™¯å¯¹æ¯”æ›´æ˜æ˜¾ */
            font-size: clamp(2.5rem, 6vw, 5rem);
            text-shadow: 0 0 20px #ffcce5;
            opacity: 0;
            transition: opacity 1s ease;
            z-index: 6;
        }

        /* è§†é¢‘æ’­æ”¾æŒ‰é’® - è°ƒæ•´é¢œè‰²é¿å…é‡åˆï¼Œä½ç½®å¾®è°ƒ */
        .video-btn {
            position: absolute;
            bottom: 5%; /* ä¸Šç§»é¿å…ä¸å½©ç‚®é‡å  */
            left: 50%;
            transform: translate(-50%, 0);
            padding: clamp(0.8rem, 2vw, 1.5rem) clamp(1.5rem, 4vw, 3rem);
            background-color: #ff80aa; /* ä¸­ç²‰è‰²ï¼Œä¸èƒŒæ™¯å’Œæ ‡é¢˜éƒ½åŒºåˆ† */
            color: #ffffff;
            border: none;
            border-radius: 50px;
            font-size: clamp(1rem, 2.5vw, 1.8rem);
            cursor: pointer;
            opacity: 0;
            transition: opacity 1s ease;
            box-shadow: 0 0 20px rgba(255, 128, 170, 0.5);
            z-index: 7;
        }

        .video-btn:hover {
            background-color: #ffffff;
            color: #ff80aa;
            box-shadow: 0 0 30px rgba(255, 128, 170, 0.8);
        }

        /* éŸ³ä¹å¼€å…³æŒ‰é’®æ ·å¼ - å³ä¸Šè§’å°å°ºå¯¸åœ†è§’ */
        .music-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            width: clamp(40px, 5vw, 60px);
            height: clamp(40px, 5vw, 60px);
            border-radius: 50%; /* åœ†å½¢åœ†è§’ */
            background-color: rgba(255, 255, 255, 0.9);
            border: none;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.3);
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0; /* åˆå§‹éšè—ï¼Œè›‹ç³•å‡ºç°å0.2sæ˜¾ç¤º */
            transition: opacity 0.3s ease, background-color 0.3s ease;
            z-index: 99; /* æœ€é«˜å±‚çº§ï¼Œä¸è¢«é®æŒ¡ */
        }

        .music-switch:hover {
            background-color: #ff69b4;
            color: #fff;
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.6);
        }

        /* è§†é¢‘æ’­æ”¾å™¨å®¹å™¨ - æ·»åŠ æ·¡å…¥æ·¡å‡ºè¿‡æ¸¡ + å…¨å±é€‚é… */
        .video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            z-index: 999;
            transition: opacity 0.8s ease;
            padding: 20px; /* é˜²æ­¢è§†é¢‘è¾¹ç¼˜æº¢å‡º */
        }

        /* è§†é¢‘å®¹å™¨æ˜¾ç¤ºçŠ¶æ€ */
        .video-container.show {
            opacity: 1;
            pointer-events: auto;
        }

        /* é€€å‡ºæŒ‰é’® */
        .exit-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 0.5rem 1rem;
            background-color: #ff4444;
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: clamp(1rem, 2vw, 1.2rem);
            cursor: pointer;
            z-index: 1000; /* é«˜äºè§†é¢‘å±‚çº§ */
        }

        /* è§†é¢‘å…ƒç´  - å…¨å±é€‚é…ï¼ˆä¿æŒæ¯”ä¾‹ï¼Œä¸è¶…å‡ºå±å¹•ï¼‰ */
        #birthday-video {
            max-width: 100%;
            max-height: 90vh; /* ç•™é¡¶éƒ¨ç©ºé—´ç»™é€€å‡ºæŒ‰é’® */
            width: auto;
            height: auto;
            border-radius: 10px;
            opacity: 0;
            transition: opacity 0.8s ease 0.2s;
            object-fit: contain; /* ä¿æŒè§†é¢‘æ¯”ä¾‹ï¼Œé€‚é…ä¸åŒå±å¹• */
        }

        /* è§†é¢‘å®¹å™¨æ˜¾ç¤ºæ—¶ï¼Œè§†é¢‘æ·¡å…¥ */
        .video-container.show #birthday-video {
            opacity: 1;
        }

        /* é‡æ–°æ’­æ”¾æŒ‰é’®ï¼ˆè§†é¢‘ç»“æŸåï¼‰ */
        .replay-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 1rem 2rem;
            background-color: #ff80aa;
            color: #fff;
            border: none;
            border-radius: 50px;
            font-size: clamp(1rem, 2vw, 1.5rem);
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: none;
            z-index: 1000;
        }

        /* è§†é¢‘æ¨¡ç³Šæ ·å¼ï¼ˆç»“æŸåï¼‰ */
        .video-blur {
            filter: blur(8px);
        }
    </style>
</head>
<body>
    <!-- æ·¡å…¥æ·¡å‡ºæ–‡å­— -->
    <div class="birthday-text">è°¢è°¢ä½ æ— æ•°ä¸ªæ—¥å¤œçš„è¾›è‹¦å¥‰çŒ®</div>

    <!-- å¯åŠ¨æŒ‰é’® -->
    <button class="start-btn">ç‚¹å‡»å¼€å¯æƒŠå–œ</button>

    <!-- å½©ç‚®å®¹å™¨ï¼ˆæ›¿æ¢ä¸ºemojiï¼‰ -->
    <div class="cannons">
        <div class="cannon cannon-left">ğŸ†</div>
        <div class="cannon cannon-right">ğŸ†</div>
    </div>

    <!-- è›‹ç³•Emoji -->
    <div class="cake-emoji">ğŸ‚</div>

    <!-- Happy Birthdayæ ‡é¢˜ -->
    <div class="happy-title">Happy Birthdayï¼</div>

    <!-- è§†é¢‘æ’­æ”¾æŒ‰é’® -->
    <button class="video-btn">æ’­æ”¾ç”Ÿæ—¥è§†é¢‘ ğŸ¬</button>

    <!-- éŸ³ä¹å¼€å…³æŒ‰é’® - å³ä¸Šè§’ -->
    <button class="music-switch" id="musicSwitch">ğŸ”Š</button>

    <!-- è§†é¢‘æ’­æ”¾å™¨å®¹å™¨ -->
    <div class="video-container">
        <button class="exit-btn">é€€å‡º âŒ</button>
        <video id="birthday-video" controls>
            <!-- æ›¿æ¢ä¸ºä½ çš„æœ¬åœ°è§†é¢‘è·¯å¾„ -->
            <source src="./birthday-video.mp4" type="video/mp4">
            ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ï¼Œè¯·æ›´æ¢æµè§ˆå™¨é‡è¯•ã€‚
        </video>
        <button class="replay-btn">é‡æ–°æ’­æ”¾ ğŸ”„</button>
    </div>

    <!-- ç”Ÿæ—¥æ­ŒéŸ³æ•ˆï¼ˆæœ¬åœ°æ–‡ä»¶ï¼Œæ›¿æ¢ä¸ºä½ çš„æœ¬åœ°MP3è·¯å¾„ï¼‰ -->
    <audio id="birthday-song" preload="auto" loop>
        <source src="./birthday-song.mp3" type="audio/mpeg">
        ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ï¼Œè¯·æ›´æ¢æµè§ˆå™¨é‡è¯•ã€‚
    </audio>

    <script>
        // è·å–DOMå…ƒç´ 
        const textEl = document.querySelector('.birthday-text');
        const startBtn = document.querySelector('.start-btn');
        const cannonsEl = document.querySelector('.cannons');
        const cakeEmoji = document.querySelector('.cake-emoji');
        const happyTitle = document.querySelector('.happy-title');
        const videoBtn = document.querySelector('.video-btn');
        const videoContainer = document.querySelector('.video-container');
        const videoEl = document.getElementById('birthday-video');
        const exitBtn = document.querySelector('.exit-btn');
        const replayBtn = document.querySelector('.replay-btn');
        const bodyEl = document.body;
        const musicSwitchBtn = document.getElementById('musicSwitch'); // éŸ³ä¹å¼€å…³
        
        // éŸ³æ•ˆå…ƒç´ ï¼ˆæœ¬åœ°ç”Ÿæ—¥æ­Œï¼‰
        const birthdaySong = document.getElementById('birthday-song');
        // è®°å½•åŸå§‹éŸ³é‡ï¼ˆç”¨äºæ¢å¤ï¼‰
        const originalVolume = 0.2;
        // è§†é¢‘æ’­æ”¾æ—¶çš„èƒŒæ™¯éŸ³ä¹éŸ³é‡ï¼ˆè°ƒå°åˆ°20%ï¼‰
        const videoModeVolume = 0.07;
        // éŸ³ä¹å¼€å…³çŠ¶æ€ï¼ˆé»˜è®¤å¼€å¯ï¼‰
        let isMusicOn = true;

        // æ–‡å­—å†…å®¹æ•°ç»„
        const textContents = [
            "è°¢è°¢ä½ æ— æ•°ä¸ªæ—¥å¤œçš„è¾›è‹¦å¥‰çŒ®",
            "ç”Ÿæ—¥å¿«ä¹ğŸ‰",
            "æˆ‘æœ€äº²çˆ±çš„è€å¦ˆ"
        ];
        
        // æ­¥éª¤1ï¼šæ–‡å­—æ·¡å…¥æ·¡å‡ºé‡å¤ä¸‰æ¬¡ï¼ˆé—´éš”è°ƒæ•´ä¸º0.8sï¼‰
        let textShowCount = 0;
        function textFade() {
            // æ›´æ–°æ–‡å­—å†…å®¹
            textEl.textContent = textContents[textShowCount];
            // æ·¡å…¥æ–‡å­—
            textEl.style.opacity = '1';
            // 2ç§’åæ·¡å‡º
            setTimeout(() => {
                textEl.style.opacity = '0';
                textShowCount++;
                // é—´éš”è°ƒæ•´ä¸º0.8ç§’ï¼ˆ800msï¼‰
                if (textShowCount < 3) {
                    setTimeout(textFade, 800); // åŸ500msæ”¹ä¸º800ms
                } else {
                    // ä¸‰æ¬¡åæ˜¾ç¤ºå¯åŠ¨æŒ‰é’®
                    setTimeout(() => {
                        startBtn.style.opacity = '1';
                    }, 800); // åŒæ­¥è°ƒæ•´ä¸º0.8ç§’
                }
            }, 2000);
        }

        // é¡µé¢åŠ è½½åå¯åŠ¨æ–‡å­—ç‰¹æ•ˆ
        window.onload = () => {
            textFade();
            // åˆå§‹åŒ–éŸ³é¢‘éŸ³é‡
            birthdaySong.volume = originalVolume;
        };

        // æ­¥éª¤2ï¼šç‚¹å‡»å¯åŠ¨æŒ‰é’® - éšè—æŒ‰é’®ï¼Œåˆ‡æ¢èƒŒæ™¯ï¼Œæ·¡å…¥å½©ç‚®ã€è›‹ç³•ã€æ ‡é¢˜ã€éŸ³ä¹å¼€å…³
        startBtn.addEventListener('click', () => {
            // éšè—å¯åŠ¨æŒ‰é’®
            startBtn.style.opacity = '0';
            // åˆ‡æ¢ä¸ºç”Ÿæ—¥ä¸»é¢˜èƒŒæ™¯è‰²
            bodyEl.classList.add('birthday-bg');
            // å»¶è¿Ÿ0.5ç§’æ·¡å…¥å½©ç‚®
            setTimeout(() => {
                cannonsEl.style.opacity = '1';
                
                // å½©ç‚®æ˜¾ç¤ºå0.5ç§’æ·¡å…¥è›‹ç³•
                setTimeout(() => {
                    cakeEmoji.style.opacity = '1';
                    
                    // è›‹ç³•å‡ºç°å0.2ç§’ï¼ˆ200msï¼‰æ˜¾ç¤ºéŸ³ä¹å¼€å…³å¹¶å°è¯•æ’­æ”¾æœ¬åœ°ç”Ÿæ—¥æ­Œ
                    setTimeout(() => {
                        musicSwitchBtn.style.opacity = '1';
                        // æ’­æ”¾æœ¬åœ°ç”Ÿæ—¥æ­Œ
                        playBirthdaySong();
                    }, 200);
                    
                    // å»¶è¿Ÿ1ç§’æ·¡å…¥Happy Birthdayæ ‡é¢˜
                    setTimeout(() => {
                        happyTitle.style.opacity = '1';
                        // å†å»¶è¿Ÿ1ç§’æ·¡å…¥è§†é¢‘æŒ‰é’®
                        setTimeout(() => {
                            videoBtn.style.opacity = '1';
                        }, 1000);
                    }, 1000);
                }, 500);
            }, 500);
        });

        // æ’­æ”¾æœ¬åœ°ç”Ÿæ—¥æ­Œå‡½æ•°
        function playBirthdaySong() {
            if (!isMusicOn) return; // å¦‚æœéŸ³ä¹å¼€å…³å…³é—­ï¼Œä¸æ’­æ”¾
            // å°è¯•æ’­æ”¾
            birthdaySong.play().then(() => {
                console.log('æœ¬åœ°ç”Ÿæ—¥æ­Œæ’­æ”¾/æ¢å¤æˆåŠŸ');
                musicSwitchBtn.textContent = 'ğŸ”Š'; // ç¡®ä¿å¼€å…³æ˜¾ç¤ºå¼€å¯çŠ¶æ€
            }).catch(err => {
                console.error('æœ¬åœ°ç”Ÿæ—¥æ­Œæ’­æ”¾å¤±è´¥:', err);
                // å¼¹å‡ºé”™è¯¯æé†’
                alert('ç”Ÿæ—¥æ­Œæ’­æ”¾å¤±è´¥ï¼è¯·æ£€æŸ¥æœ¬åœ°éŸ³é¢‘æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œæˆ–æµè§ˆå™¨æ˜¯å¦å…è®¸éŸ³é¢‘è‡ªåŠ¨æ’­æ”¾ã€‚');
                // åˆ‡æ¢éŸ³ä¹å¼€å…³ä¸ºå…³é—­çŠ¶æ€
                isMusicOn = false;
                musicSwitchBtn.textContent = 'ğŸ”‡';
            });
        }

        // éŸ³ä¹å¼€å…³æŒ‰é’®ç‚¹å‡»äº‹ä»¶ - åˆ‡æ¢ã€æš‚åœ/ç»§ç»­æ’­æ”¾ã€‘
        musicSwitchBtn.addEventListener('click', () => {
            isMusicOn = !isMusicOn;
            if (isMusicOn) {
                // å¼€å¯éŸ³ä¹ï¼šæ¢å¤éŸ³é‡å¹¶æ’­æ”¾
                birthdaySong.volume = videoContainer.classList.contains('show') ? videoModeVolume : originalVolume;
                playBirthdaySong();
                musicSwitchBtn.textContent = 'ğŸ”Š';
            } else {
                // å…³é—­éŸ³ä¹ï¼šæš‚åœéŸ³é¢‘
                birthdaySong.pause();
                musicSwitchBtn.textContent = 'ğŸ”‡';
            }
        });

        // æ­¥éª¤3ï¼šç‚¹å‡»è§†é¢‘æŒ‰é’® - æ·¡å…¥è§†é¢‘æ’­æ”¾å™¨ï¼Œè°ƒå°èƒŒæ™¯éŸ³ä¹éŸ³é‡
        videoBtn.addEventListener('click', () => {
            // è°ƒå°èƒŒæ™¯éŸ³ä¹éŸ³é‡ï¼ˆä»…å½“éŸ³ä¹å¼€å¯æ—¶ï¼‰
            if (isMusicOn && !birthdaySong.paused) {
                birthdaySong.volume = videoModeVolume;
            }
            // æ·»åŠ showç±»è§¦å‘æ·¡å…¥
            videoContainer.classList.add('show');
            // è‡ªåŠ¨æ’­æ”¾æœ¬åœ°è§†é¢‘
            setTimeout(() => {
                videoEl.play().catch(err => {
                    console.log('è§†é¢‘è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»æ’­æ”¾:', err);
                });
            }, 300);
        });

        // æ­¥éª¤4ï¼šé€€å‡ºæŒ‰é’® - æ·¡å‡ºè§†é¢‘æ’­æ”¾å™¨ï¼Œæ¢å¤èƒŒæ™¯éŸ³ä¹éŸ³é‡
        exitBtn.addEventListener('click', () => {
            // ç§»é™¤showç±»è§¦å‘æ·¡å‡º
            videoContainer.classList.remove('show');
            // å»¶è¿Ÿé‡ç½®è§†é¢‘çŠ¶æ€ï¼Œç­‰æ·¡å‡ºåŠ¨ç”»å®Œæˆ
            setTimeout(() => {
                videoEl.pause();
                videoEl.currentTime = 0;
                videoEl.classList.remove('video-blur');
                replayBtn.style.display = 'none';
                replayBtn.style.opacity = '0';
                
                // æ¢å¤èƒŒæ™¯éŸ³ä¹éŸ³é‡ï¼ˆä»…å½“éŸ³ä¹å¼€å¯æ—¶ï¼‰
                if (isMusicOn && !birthdaySong.paused) {
                    birthdaySong.volume = originalVolume;
                }
            }, 800);
        });

        // æ­¥éª¤5ï¼šè§†é¢‘ç»“æŸå - æ¨¡ç³Š+æ˜¾ç¤ºé‡æ–°æ’­æ”¾æŒ‰é’®
        videoEl.addEventListener('ended', () => {
            videoEl.classList.add('video-blur');
            replayBtn.style.display = 'block';
            setTimeout(() => {
                replayBtn.style.opacity = '1';
            }, 500);
        });

        // æ­¥éª¤6ï¼šé‡æ–°æ’­æ”¾æŒ‰é’® - é‡æ–°æ’­æ”¾è§†é¢‘ï¼ˆä¿æŒèƒŒæ™¯éŸ³ä¹ä½éŸ³é‡ï¼‰
        replayBtn.addEventListener('click', () => {
            videoEl.classList.remove('video-blur');
            replayBtn.style.opacity = '0';
            setTimeout(() => {
                replayBtn.style.display = 'none';
                videoEl.currentTime = 0;
                videoEl.play();
                // ç¡®ä¿èƒŒæ™¯éŸ³ä¹ä¿æŒä½éŸ³é‡
                if (isMusicOn && !birthdaySong.paused) {
                    birthdaySong.volume = videoModeVolume;
                }
            }, 500);
        });

        // ç›‘å¬è§†é¢‘æ‰‹åŠ¨æ’­æ”¾/æš‚åœäº‹ä»¶ï¼ŒåŒæ­¥è°ƒæ•´èƒŒæ™¯éŸ³ä¹éŸ³é‡
        videoEl.addEventListener('play', () => {
            // è§†é¢‘æ’­æ”¾æ—¶è°ƒå°èƒŒæ™¯éŸ³ä¹éŸ³é‡
            if (isMusicOn && !birthdaySong.paused) {
                birthdaySong.volume = videoModeVolume;
            }
        });

        // ç›‘å¬è§†é¢‘æš‚åœäº‹ä»¶ï¼ˆæ‰‹åŠ¨æš‚åœï¼‰ï¼Œæ¢å¤èƒŒæ™¯éŸ³ä¹éŸ³é‡
        videoEl.addEventListener('pause', () => {
            // æ’é™¤è§†é¢‘æ’­æ”¾ç»“æŸçš„æƒ…å†µ
            if (videoEl.currentTime < videoEl.duration && isMusicOn && !birthdaySong.paused) {
                birthdaySong.volume = originalVolume;
            }
        });

        // é¡µé¢ç¦»å¼€æ—¶åœæ­¢éŸ³æ•ˆ
        window.addEventListener('beforeunload', () => {
            birthdaySong.pause();
        });
    </script>
</body>
</html>